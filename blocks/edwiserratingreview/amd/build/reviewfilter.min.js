define("block_edwiserratingreview/reviewfilter",["jquery","core/ajax","core/notification","core/str","core/templates"],(function($,Ajax,Notification,Str){var SELECTORS_REVIEWDATA=".reviewdata",SELECTORS_SHOWMOREREVIEWBTN=".showmorereviewsbtn",SELECTORS_REVIEWSELECTOR=".reviewselector",SELECTORS_SHOWMOREREVIEWCLASS="#showmorereviewclass";const strings=[{key:"noreviewsfound",component:"block_edwiserratingreview"},{key:"showmorereview",component:"block_edwiserratingreview"},{key:"showmorereviwebutton",component:"block_edwiserratingreview"}];var setbuttonurl=function(rating){var url=M.cfg.wwwroot+"/blocks/edwiserratingreview/view.php?filter="+rating+"&contextid="+M.cfg.courseContextId;$(SELECTORS_SHOWMOREREVIEWBTN).attr("href",url)};const loadReviews=()=>{var rates,rating=$(".reviewselector option:selected").attr("value");rates=rating,Ajax.call([{methodname:"block_edwiserratingreview_show_review",args:{rating:rates,startlimit:0,lastlimit:5,contextid:M.cfg.courseContextId},done:function(data){var result='<div class="m-3">'+M.util.get_string("noreviewsfound","block_edwiserratingreview")+"</div>";if(""!==data&&(result=data),$(SELECTORS_REVIEWDATA).empty().append(result),5==$(SELECTORS_REVIEWDATA).children("li.review-card").length){M.util.get_string("showmorereview","block_edwiserratingreview");var showmorereviebtn=M.util.get_string("showmorereviwebutton","block_edwiserratingreview");$(SELECTORS_SHOWMOREREVIEWCLASS).empty().append(showmorereviebtn),setbuttonurl(rates)}else $(SELECTORS_SHOWMOREREVIEWCLASS).empty().append("")},fail:function(){console.log(Notification.exception)}}])};return{init:function(){$(document).ready((function(){Str.get_strings(strings).then((function(results){return results,results})),loadReviews(),$(document).on("change",SELECTORS_REVIEWSELECTOR,(function(){loadReviews()}))}))}}}));

//# sourceMappingURL=reviewfilter.min.js.map